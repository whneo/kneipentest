<?php

include './config.php';
spl_autoload_register(function($class) {
    include './class/' . $class . '.php';
});
include './view/begin.php';

$navigation = isset($_GET['navi']) ? $_GET['navi'] : '0';
$view = 'default';
switch ($navigation) {
    case"0":
        echo "<h2>Willkommen beim Kneipentest...</h2>";
        break;
    case "1":
        echo "<h2>Kneipen anzeigen (normal)</h2>";
        $view = 'kneipenAnzeigen';
        break;
    case "2":
        echo "<h2>Kneipen anzeigen (Tablesorter)</h2>";
        $view = 'kneipenAnzeigen2';
        break;
    case "3":
        echo "<h2>Kneipen anzeigen (animiert:tablesort)</h2>";
        $view = 'kneipenAnzeigen3';
        break;
    case "4":
        echo "<h2>Kneipen hinzufÃ¼gen</h2>";
        $view = 'kneipenEintragen';
        break;
    default:
        break;
}
$sent = isset($_POST['sent']) ? $_POST['sent'] : '';
$suchstring = isset($_POST['suchstring']) ? $_POST['suchstring'] : '';
if ($sent && $suchstring) {
    echo "<h2>Kneipensuche</h2>";
    $view = 'suchen';
}
// Eingabeformular auswerten
$insertsent = isset($_POST['insertsent']) ? $_POST['insertsent'] : '';
$kneipenName = isset($_POST['kneipenName']) ? $_POST['kneipenName'] : '';
$kneipenArt = isset($_POST['kneipenArt']) ? $_POST['kneipenArt'] : '';
$kneipenNote = isset($_POST['kneipenNote']) ? $_POST['kneipenNote'] : '';
$kneipenKommentar = isset($_POST['kneipenKommentar']) ? $_POST['kneipenKommentar'] : '';

if ($insertsent && $kneipenName && $kneipenKommentar) {
    echo '<h2>Kneipen eintragen</h2>';
    Kneipe::insert(new Kneipe($kneipenName, $kneipenArt, $kneipenNote, $kneipenKommentar));
    $view = 'kneipenAnzeigen';
}
include './view/' . $view . '.php';
include './view/end.php';
?>